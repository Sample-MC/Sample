<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Emergency Medical Card Viewer</title>
  <style>
    body { font-family: Arial, sans-serif; background: #fff; margin: 0; padding: 20px; }
    #card { max-width: 400px; margin: auto; padding: 15px; border: 1px solid #000; background: #fff; }
    h2 { color: red; text-align: center; border: 2px solid red; padding: 5px; }
    .row { display: flex; justify-content: space-between; align-items: center; }
    .label { font-weight: bold; }
    img#photo { width: 60px; height: 70px; object-fit: cover; border: 1px solid #000; float: right; }
    table { width: 100%; border-collapse: collapse; margin-top: 10px; font-size: 14px; }
    td { border: 1px solid #ddd; padding: 6px; }
    td.label { width: 35%; background: #f0f0f0; font-weight: bold; }
    #footer { margin-top: 10px; font-size: 12px; text-align: center; padding: 10px; background: #d4f1e4; border-radius: 6px; }
  </style>
</head>
<body>
  <div id="card">
    <h2>EMERGENCY MEDICAL CARD</h2>
    <div class="row">
      <div>
        <div><strong>NAME:</strong> <span id="name"></span> <span id="designation" style="font-size: 12px; border: 1px solid gray; padding: 1px 4px; border-radius: 4px;"></span></div>
      </div>
      <img id="photo" src="" alt="Photo" onerror="this.style.display='none'" />
    </div>
    <div style="margin-top:10px;">
      <div><span class="label">Company Name:</span> <span id="company"></span></div>
      <div><span class="label">Street Address:</span> <span id="address"></span></div>
      <div><span class="label">EID No:</span> <span id="eid"></span> <span style="float:right;"><span class="label">Gender:</span> <span id="gender"></span> | <span class="label">Age:</span> <span id="age"></span></span></div>
      <div><span class="label">Nationality:</span> <span id="nationality"></span> <span style="float:right;"><span class="label">DOB:</span> <span id="dob"></span></span></div>
      <div><span class="label">Contact No:</span> <span id="contact"></span> <span style="float:right;"><span class="label">Relation Person No:</span> <span id="relation_phone"></span></span></div>
    </div>

    <table>
      <tr><td class="label">Blood Group</td><td id="blood_group"></td></tr>
      <tr><td class="label">Height</td><td id="height"></td></tr>
      <tr><td class="label">Weight</td><td id="weight"></td></tr>
      <tr><td class="label">Waist Size</td><td id="waist_size"></td></tr>
      <tr><td class="label">Blood Sugar</td><td id="blood_sugar"></td></tr>
      <tr><td class="label">Blood Pressure</td><td id="blood_pressure"></td></tr>
    </table>

    <div id="footer">
      Creating a mentally healthy workplace begins with recognizing everyone's struggle,<br />even if itâ€™s not visible.
    </div>
  </div>

  <script>
    function loadCardFromHash() {
      const hash = decodeURIComponent(location.hash.substring(1));
      if (!hash) return;
      try {
        const data = JSON.parse(hash);
        document.getElementById("name").textContent = data.name || "";
        document.getElementById("designation").textContent = data.designation || "";
        document.getElementById("company").textContent = data.company || "";
        document.getElementById("address").textContent = data.address || "";
        document.getElementById("eid").textContent = data.eid || "";
        document.getElementById("gender").textContent = data.gender || "";
        document.getElementById("age").textContent = data.age || "";
        document.getElementById("dob").textContent = data.dob || "";
        document.getElementById("nationality").textContent = data.nationality || "";
        document.getElementById("contact").textContent = data.contact || "";
        document.getElementById("relation_phone").textContent = data.relation_phone || "";
        document.getElementById("blood_group").textContent = data.blood_group || "";
        document.getElementById("height").textContent = data.height || "";
        document.getElementById("weight").textContent = data.weight || "";
        document.getElementById("waist_size").textContent = data.waist_size || "";
        document.getElementById("blood_sugar").textContent = data.blood_sugar || "";
        document.getElementById("blood_pressure").textContent = data.blood_pressure || "";
        document.getElementById("photo").src = data.photo || "";
      } catch (e) {
        document.getElementById("card").innerHTML = "<p style='color:red;'>Invalid QR data</p>";
      }
    }

    window.onload = loadCardFromHash;
  </script>
</body>
</html>
